{% extends "_layout.html" %}

{% block body %}
    <div class="container">

        {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
        <div style="padding: 20px">
            <h1 class="title display-inline">{{ recipe.name }}</h1>
            <a aria-label="edit" class="button display-inline has-tooltip-right" data-tooltip="Edit" href="{% url 'recipes:edit' recipe.id %}">
                <ion-icon name="create"></ion-icon>
            </a>
            <a aria-label="delete" class="button margin-left-10 display-inline has-tooltip-right" data-tooltip="Delete" href="{% url 'recipes:delete' recipe.id %}">
                <ion-icon name="trash"></ion-icon>
            </a>
        </div>
        <div class="box"><p class="whitespace-pre-wrap">{{ recipe.content }}</p></div>
        <p>Author: {{ recipe.author.full_name }}</p>
        <p>Likes: {{ recipe.likes }}</p>

        <form class="padding-20" action="{% url 'recipes:like' recipe.id %}" method="post">
            {% csrf_token %}
            <input type="submit" class="button is-primary" value="Like">
        </form>

        {% include "recipes/add_comment.html" with recipe_id=recipe.id %}

        {% if recipe.comments %}
            {% for comment in recipe.comments.all %}
                <div class="box width-50">
                    <p class="whitespace-pre-wrap">{{ comment.content }}</p>
                    <p class="whitespace-pre-wrap">Commented by {{ comment.user.username }}, on {{ comment.created_date }}</p>
                </div>
        {% endfor %}
    {% endif %}
    </div>
{% endblock %}